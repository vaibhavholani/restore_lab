(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4106],{78800:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CrossDomainConnection=void 0;t.CrossDomainConnection=class{constructor(e,t,n,o,r){this.config=t,this._listen(e,n,o),this._post=(t,r)=>{e.postMessage({type:"event",endpoint:t,args:r,secret:o},n)},this.handshake=r,this.remoteOrigin=n}_listen(e,t,n){const{config:o}=this,r=r=>{const{origin:s,data:a,source:c}=r;if(c===e&&s===t&&a.secret===n&&"event"===a.type){const e=o.receive[a.endpoint];if(!e)throw new Error(`xdm: no handler for endpoint: ${a.endpoint}`);try{e(...a.args)}catch(i){throw new Error(i)}}};window.addEventListener("message",r),this.listener=r}close(){window.removeEventListener("message",this.listener)}send(e,...t){if(!Object.prototype.hasOwnProperty.call(this.config.send,e))throw new Error(`no handler for endpoint: ${e}`);const n=this.config.send[e];let o=t;return"function"===typeof n&&(o=n(...o)),this._post(e,o)}}},54106:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(45104);Object.defineProperty(t,"CrossDomainHost",{enumerable:!0,get:function(){return o.CrossDomainHost}});var r=n(39358);Object.defineProperty(t,"connect",{enumerable:!0,get:function(){return r.connect}})},93988:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Url=void 0;const o=n(49758);t.Url={buildUrl:o.buildUrl,parseSimpleQuery:o.parseSimpleQuery,parseUrl:o.parseUrl,parseLocation:o.parseLocation};var r=n(16585);Object.defineProperty(t,"encodeToken",{enumerable:!0,get:function(){return r.encodeToken}}),Object.defineProperty(t,"decodeToken",{enumerable:!0,get:function(){return r.decodeToken}}),Object.defineProperty(t,"randomToken",{enumerable:!0,get:function(){return r.randomToken}})},16585:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeToken=t.encodeToken=t.randomToken=void 0;const n=2147483647;function o(e,t){return s(r(a(e),a(t)))}function r(e,t){return e^t}function s(e){return e.toString(36)}function a(e){return parseInt(e,36)}t.randomToken=function(){return s(function(){if(window.crypto){const e=new Uint32Array(1);return window.crypto.getRandomValues(e),e[0]%n}const e=Math.floor(Math.random()*n);return r(Math.abs(Date.now()%n),e)}())},t.encodeToken=function(e,t){return o(e,t)},t.decodeToken=function(e,t){return o(e,t)}},49758:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(16682);Object.defineProperty(t,"parseUrl",{enumerable:!0,get:function(){return o.parseUrl}}),Object.defineProperty(t,"parseLocation",{enumerable:!0,get:function(){return o.parseLocation}}),Object.defineProperty(t,"parseSimpleQuery",{enumerable:!0,get:function(){return o.parseSimpleQuery}});var r=n(85208);Object.defineProperty(t,"buildUrl",{enumerable:!0,get:function(){return r.buildUrl}})},85208:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildUrl=void 0;const o=n(16682);t.buildUrl=function e(t,n){if("string"===typeof t)return e(o.parseUrl(t),n);const r=u("?",t.search,n&&n.search),s=u("#",t.hash,n&&n.hash),{origin:a,pathname:c}=t,{origin:i=!0}=n;return i?`${a}${c}${r}${s}`:`${c}${r}${s}`;function u(e,t,n){const o=n&&Object.keys(n);return n&&o.length>0?(t?`${t}&`:e)+o.map((e=>[e,n[e]].map(encodeURIComponent).join("="))).join("&"):t}}},16682:function(e,t,n){"use strict";var o=n(34155),r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseSimpleQuery=t.parseLocation=t.parseUrl=void 0;const s=r(n(10861));function a(e){const{hash:t,href:n,search:o}=e;return{hash:t,host:u(e),href:n,origin:c(e),pathname:p(e),protocol:i(e),search:o}}function c(e){return`${i(e)}//${u(e)}`}function i(e){const{protocol:t}=e;if(t)return t;const[,n]=/^([^:]+:)\/\//.exec(e.href);return n}function u(e){const{host:t}=e;if(t){const[e]=t.split(":");return e}const[,n]=/^[^:]+:\/\/([^/?#]*)/.exec(e.href),[o]=n.split(":");return o}function p(e){const{pathname:t}=e;return"/"!==t[0]?`/${t}`:t}t.parseUrl=function(e){if(o.server){const{hash:t="",host:n="",href:o="",pathname:r="",protocol:a="",search:c=""}=s.default.URL(e);return{hash:t||"",host:n||"",href:o||"",origin:`${a}//${n}`||"",pathname:r||"",protocol:a||"",search:c||""}}const t=document.createElement("a");return t.href=e,a(t)},t.parseLocation=a,t.parseSimpleQuery=function(e){const t={};return e.replace(/^[#?]/,"").split("&").forEach((e=>{const n=function(e,t){if("string"===typeof t){const n=e.indexOf(t);if(n>=0)return[e.slice(0,n),e.slice(n+t.length)]}else if(t instanceof RegExp){const n=t.exec(e);return[e.slice(0,n.index),e.slice(n.index+n[0].length)]}return[e]}(e,"=").map(decodeURIComponent);if(2===n.length){const[e,o]=n;t[e]=o}})),t}},45104:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CrossDomainHost=void 0;const o=n(78800),r=n(93988),{parseUrl:s,buildUrl:a}=r.Url;t.CrossDomainHost=class{constructor(e){this.options=e}load(e,t,n,o){this.unload(),this.iframe=e,this._connect(e,t,n,o)}_connect(e,t,n={},c){const i=s(t),{origin:u}=i,{handshake:p=null,timeout:h}=n,l=r.randomToken(),f=r.randomToken(),d=r.encodeToken(l,f);this.connecting=function(e,t,n){const{origin:r,secret:s,otp:a,handshake:c,timeout:i}=t,{iframe:u,options:{endpoints:p}}=e,h=[];let l=!1;const f=(e,t)=>{if(l)return;l=!0,h.forEach((e=>e()));const a=e?null:new o.CrossDomainConnection(u.contentWindow,p,r,s,t);n&&n(e,a)},d=()=>{if(u.removeEventListener("load",d),h.push(function(e,t,n,o,r){const{iframe:s}=e,a=setInterval((()=>{try{s.contentWindow.postMessage({type:"handshake",otp:n,handshake:o},t)}catch(e){r(e)}}),100);return()=>clearInterval(a)}(e,r,a,c,f)),h.push(function(e,t,n,o){const{iframe:r}=e,s=({origin:a,source:c,data:i})=>{a===t&&c===r.contentWindow&&i&&"handshake"===i.type&&i.secret===n&&(window.removeEventListener("message",s),e.iframe!==r&&o(new Error("interrupted")),o(null,i.handshake))};return window.addEventListener("message",s),()=>window.removeEventListener("message",s)}(e,r,s,f)),i){const e=setTimeout((()=>f("timeout",null)),i);h.push((()=>clearTimeout(e)))}};return u.addEventListener("load",d),h.push((()=>u.removeEventListener("load",d))),f}(this,{origin:u,secret:l,otp:f,handshake:p,timeout:h},c),e.src=a(i,{search:Object.assign({},n&&n.search),hash:Object.assign(Object.assign({},n&&n.hash),{"xdm-otp-secret":d})})}unload(){const{iframe:e,connecting:t}=this;return this.iframe=null,this.connecting=null,e?(e.src="about:blank",t&&t(new Error("unload")),e):null}}},39358:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function a(e){try{i(o.next(e))}catch(t){s(t)}}function c(e){try{i(o.throw(e))}catch(t){s(t)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}i((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.connect=void 0;const r=n(78800),s=n(93988),{parseSimpleQuery:a}=s.Url;t.connect=function(e){return o(this,void 0,void 0,(function*(){const{timeout:t,handshake:n}=e,{"xdm-otp-secret":o}=a(window.location.hash);if(!o)throw new Error("no secret");window.location.hash="";const{origin:c,otp:i,source:u,handshake:p}=yield function(e){let t;return function(e,t){return e.then(t,t),e}(new Promise(((n,o)=>{const r=({source:e,origin:t,data:o})=>{if(e===window.parent){const{type:r,otp:s,handshake:a}=o;"handshake"===r&&n({origin:t,otp:s,source:e,handshake:a})}};window.addEventListener("message",r),t=()=>window.removeEventListener("message",r),e&&setTimeout((()=>o(new Error("timeout"))),e)})),t)}(t),h=s.decodeToken(o,i),l="function"===typeof n?n(p):n;return u.postMessage({type:"handshake",secret:h,handshakeResponse:l},c),new r.CrossDomainConnection(u,e,c,h,p)}))}},10861:function(e,t,n){var o,r=(o=n(17673))&&"object"==typeof o&&"default"in o?o.default:o,s=/https?|ftp|gopher|file/;function a(e){"string"==typeof e&&(e=b(e));var t=function(e,t,n){var o=e.auth,r=e.hostname,s=e.protocol||"",a=e.pathname||"",c=e.hash||"",i=e.query||"",u=!1;o=o?encodeURIComponent(o).replace(/%3A/i,":")+"@":"",e.host?u=o+e.host:r&&(u=o+(~r.indexOf(":")?"["+r+"]":r),e.port&&(u+=":"+e.port)),i&&"object"==typeof i&&(i=t.encode(i));var p=e.search||i&&"?"+i||"";return s&&":"!==s.substr(-1)&&(s+=":"),e.slashes||(!s||n.test(s))&&!1!==u?(u="//"+(u||""),a&&"/"!==a[0]&&(a="/"+a)):u||(u=""),c&&"#"!==c[0]&&(c="#"+c),p&&"?"!==p[0]&&(p="?"+p),{protocol:s,host:u,pathname:a=a.replace(/[?#]/g,encodeURIComponent),search:p=p.replace("#","%23"),hash:c}}(e,r,s);return""+t.protocol+t.host+t.pathname+t.search+t.hash}var c="http://",i="w.w",u=c+i,p=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i,h=/https?|ftp|gopher|file/;function l(e,t){var n="string"==typeof e?b(e):e;e="object"==typeof e?a(e):e;var o=b(t),r="";n.protocol&&!n.slashes&&(r=n.protocol,e=e.replace(n.protocol,""),r+="/"===t[0]||"/"===e[0]?"/":""),r&&o.protocol&&(r="",o.slashes||(r=o.protocol,t=t.replace(o.protocol,"")));var s=e.match(p);s&&!o.protocol&&(e=e.substr((r=s[1]+(s[2]||"")).length),/^\/\/[^/]/.test(t)&&(r=r.slice(0,-1)));var i=new URL(e,u+"/"),l=new URL(t,i).toString().replace(u,""),f=o.protocol||n.protocol;return f+=n.slashes||o.slashes?"//":"",!r&&f?l=l.replace(c,f):r&&(l=l.replace(c,"")),h.test(l)||~t.indexOf(".")||"/"===e.slice(-1)||"/"===t.slice(-1)||"/"!==l.slice(-1)||(l=l.slice(0,-1)),r&&(l=r+("/"===l[0]?l.substr(1):l)),l}function f(){}f.prototype.parse=b,f.prototype.format=a,f.prototype.resolve=l,f.prototype.resolveObject=l;var d=/^https?|ftp|gopher|file/,m=/^(.*?)([#?].*)/,v=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i,g=/^([a-z0-9.+-]*:)?\/\/\/*/i,y=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i;function b(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),e&&"object"==typeof e&&e instanceof f)return e;var o=(e=e.trim()).match(m);e=o?o[1].replace(/\\/g,"/")+o[2]:e.replace(/\\/g,"/"),y.test(e)&&"/"!==e.slice(-1)&&(e+="/");var s=!/(^javascript)/.test(e)&&e.match(v),c=g.test(e),p="";s&&(d.test(s[1])||(p=s[1].toLowerCase(),e=""+s[2]+s[3]),s[2]||(c=!1,d.test(s[1])?(p=s[1],e=""+s[3]):e="//"+s[3]),3!==s[2].length&&1!==s[2].length||(p=s[1],e="/"+s[3]));var h,l=(o?o[1]:e).match(/^https?:\/\/[^/]+(:[0-9]+)(?=\/|$)/),b=l&&l[1],w=new f,U="",j="";try{h=new URL(e)}catch(r){U=r,p||n||!/^\/\//.test(e)||/^\/\/.+[@.]/.test(e)||(j="/",e=e.substr(1));try{h=new URL(e,u)}catch(e){return w.protocol=p,w.href=p,w}}w.slashes=c&&!j,w.host=h.host===i?"":h.host,w.hostname=h.hostname===i?"":h.hostname.replace(/(\[|\])/g,""),w.protocol=U?p||null:h.protocol,w.search=h.search.replace(/\\/g,"%5C"),w.hash=h.hash.replace(/\\/g,"%5C");var k=e.split("#");!w.search&&~k[0].indexOf("?")&&(w.search="?"),w.hash||""!==k[1]||(w.hash="#"),w.query=t?r.decode(h.search.substr(1)):w.search.substr(1),w.pathname=j+(s?function(e){return e.replace(/['^|`]/g,(function(e){return"%"+e.charCodeAt().toString(16).toUpperCase()})).replace(/((?:%[0-9A-F]{2})+)/g,(function(e,t){try{return decodeURIComponent(t).split("").map((function(e){var t=e.charCodeAt();return t>256||/^[a-z0-9]$/i.test(e)?e:"%"+t.toString(16).toUpperCase()})).join("")}catch(e){return t}}))}(h.pathname):h.pathname),"about:"===w.protocol&&"blank"===w.pathname&&(w.protocol="",w.pathname=""),U&&"/"!==e[0]&&(w.pathname=w.pathname.substr(1)),p&&!d.test(p)&&"/"!==e.slice(-1)&&"/"===w.pathname&&(w.pathname=""),w.path=w.pathname+w.search,w.auth=[h.username,h.password].map(decodeURIComponent).filter(Boolean).join(":"),w.port=h.port,b&&!w.host.endsWith(b)&&(w.host+=b,w.port=b.slice(1)),w.href=j?""+w.pathname+w.search+w.hash:a(w);var O=/^(file)/.test(w.href)?["host","hostname"]:[];return Object.keys(w).forEach((function(e){~O.indexOf(e)||(w[e]=w[e]||null)})),w}t.parse=b,t.format=a,t.resolve=l,t.resolveObject=function(e,t){return b(l(e,t))},t.Url=f},62587:function(e){"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,n,o,r){n=n||"&",o=o||"=";var s={};if("string"!==typeof e||0===e.length)return s;var a=/\+/g;e=e.split(n);var c=1e3;r&&"number"===typeof r.maxKeys&&(c=r.maxKeys);var i=e.length;c>0&&i>c&&(i=c);for(var u=0;u<i;++u){var p,h,l,f,d=e[u].replace(a,"%20"),m=d.indexOf(o);m>=0?(p=d.substr(0,m),h=d.substr(m+1)):(p=d,h=""),l=decodeURIComponent(p),f=decodeURIComponent(h),t(s,l)?Array.isArray(s[l])?s[l].push(f):s[l]=[s[l],f]:s[l]=f}return s}},12361:function(e){"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,o,r){return n=n||"&",o=o||"=",null===e&&(e=void 0),"object"===typeof e?Object.keys(e).map((function(r){var s=encodeURIComponent(t(r))+o;return Array.isArray(e[r])?e[r].map((function(e){return s+encodeURIComponent(t(e))})).join(n):s+encodeURIComponent(t(e[r]))})).join(n):r?encodeURIComponent(t(r))+o+encodeURIComponent(t(e)):""}},17673:function(e,t,n){"use strict";t.decode=t.parse=n(62587),t.encode=t.stringify=n(12361)}}]);